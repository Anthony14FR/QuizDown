{% extends 'base.html.twig' %}

{% block body %}
    <div class="container mx-auto px-8">
        <h1 class="text-3xl font-bold mb-8 text-center">Bienvenue sur QuizDown</h1>

        <h2 class="text-2xl font-bold mb-4 text-sm">QuizDown en quelques chiffres</h2>
        <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4 mb-8">
            <div class="stat bg-base-100 shadow">
                <div class="stat-figure text-primary">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                        <path d="M3 5v14h18V5H3zm1 2h16v10H4V7z"/>
                        <path d="M9 9h6v2H9z"/>
                    </svg>
                </div>
                <div class="stat-title">Quiz</div>
                <div class="stat-value">{{ stats.total_quizzes }}</div>
            </div>
            <div class="stat bg-base-100 shadow">
                <div class="stat-figure text-primary">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                        <path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/>
                    </svg>
                </div>
                <div class="stat-title">Utilisateurs</div>
                <div class="stat-value">{{ stats.total_users }}</div>
            </div>
            <div class="stat bg-base-100 shadow">
                <div class="stat-figure text-primary">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                        <path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/>
                    </svg>
                </div>
                <div class="stat-title">Participations</div>
                <div class="stat-value">{{ stats.total_submissions }}</div>
            </div>
            <div class="stat bg-base-100 shadow">
                <div class="stat-figure text-primary">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                        <path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10H7v-2h10v2z"/>
                    </svg>
                </div>
                <div class="stat-title">Catégories</div>
                <div class="stat-value">{{ stats.total_categories }}</div>
            </div>
            <div class="stat bg-base-100 shadow">
                <div class="stat-figure text-primary">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                        <path d="M21.41 11.58l-9-9C12.05 2.22 11.55 2 11 2H4c-1.1 0-2 .9-2 2v7c0 .55.22 1.05.59 1.42l9 9c.36.36.86.58 1.41.58.55 0 1.05-.22 1.41-.59l7-7c.37-.36.59-.86.59-1.41 0-.55-.23-1.06-.59-1.42zM5.5 7C4.67 7 4 6.33 4 5.5S4.67 4 5.5 4 7 4.67 7 5.5 6.33 7 5.5 7z"/>
                    </svg>
                </div>
                <div class="stat-title">Tags</div>
                <div class="stat-value">{{ stats.total_tags }}</div>
            </div>
            <div class="stat bg-base-100 shadow">
                <div class="stat-figure text-primary">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                        <path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-4 8c0 1.11-.9 2-2 2h-2v2h4v2H9v-4c0-1.11.9-2 2-2h2V9H9V7h4c1.1 0 2 .89 2 2v2z"/>
                    </svg>
                </div>
                <div class="stat-title">Score moyen</div>
                <div class="stat-value">{{ stats.avg_score|number_format(1) }}%</div>
            </div>
        </div>

        <div class="divider">Quiz les plus joués</div>

        <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-6">
            {% for quiz in popular_quizzes %}
                <div class="card bg-base-100 shadow-xl">
                    <div class="card-body">
                        <h2 class="card-title">{{ quiz.quiz.title }}</h2>
                        <p>{{ quiz.quiz.description|slice(0, 100) }}...</p>
                        <div class="flex justify-between items-center mt-4">
                            <div class="badge badge-primary">{{ quiz.playCount }} participations</div>
                            <a href="{{ path('app_quiz_play', {'id': quiz.quiz.id}) }}" class="btn btn-primary btn-sm">Jouer</a>
                        </div>
                    </div>
                </div>
            {% endfor %}
        </div>
    </div>
{% endblock %}
